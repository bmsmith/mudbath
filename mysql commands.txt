CREATE DATABASE mudbath;

CREATE TABLE accounts (account_id INT AUTO_INCREMENT NOT NULL, permissions TINYINT NOT NULL, creation_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP, account_name VARCHAR(128), last_visit_date DATETIME, display_name VARCHAR(256), PRIMARY KEY (account_id, account_name));

INSERT INTO accounts(account_name, password, permissions) VALUES('root', '< password hash + salt>', 1);

CREATE TABLE serverdata(salt VARCHAR[16], timeout INT, welcome TEXT, login TEXT, newuser TEXT);

INSERT INTO serverdata(salt, timeout) VALUES ('<randomstring>', 0, '', '', '');

CREATE TABLE helpfiles (title VARCHAR(32), fullfile TEXT, PRIMARY KEY(name));

CREATE TABLE channels (name VARCHAR(128) NOT NULL, topic TEXT, active BOOLEAN, PRIMARY KEY (name));

CREATE TABLE messages (message_id INT AUTO_INCREMENT NOT NULL, sender VARCHAR(128), recipient VARCHAR(128), message TEXT, sendingdatetime TIMESTAMP DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (message_id));